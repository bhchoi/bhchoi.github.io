<!DOCTYPE html><html lang="en" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="theme" content="Chirpy v2.6.2"><meta name="generator" content="Jekyll v4.1.1" /><meta property="og:title" content="[Python Clean Code] Chapter1. 코드 포매팅과 도구" /><meta name="author" content="your_full_name" /><meta property="og:locale" content="en_US" /><meta name="description" content="Python Clean Code 책 내용 정리 노트 입니다." /><meta property="og:description" content="Python Clean Code 책 내용 정리 노트 입니다." /><link rel="canonical" href="http://localhost:4000/posts/Clean-Code-In-Python-chapter1/" /><meta property="og:url" content="http://localhost:4000/posts/Clean-Code-In-Python-chapter1/" /><meta property="og:site_name" content="Chirpy" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2020-05-01T09:38:00+08:00" /><meta name="twitter:card" content="summary" /><meta property="twitter:title" content="[Python Clean Code] Chapter1. 코드 포매팅과 도구" /><meta name="twitter:site" content="@twitter_username" /><meta name="twitter:creator" content="@your_full_name" /><meta name="google-site-verification" content="google_meta_tag_verification" /> <script type="application/ld+json"> {"author":{"@type":"Person","name":"your_full_name"},"headline":"[Python Clean Code] Chapter1. 코드 포매팅과 도구","dateModified":"2020-05-01T09:38:00+08:00","datePublished":"2020-05-01T09:38:00+08:00","@type":"BlogPosting","description":"Python Clean Code 책 내용 정리 노트 입니다.","mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:4000/posts/Clean-Code-In-Python-chapter1/"},"url":"http://localhost:4000/posts/Clean-Code-In-Python-chapter1/","@context":"https://schema.org"}</script><title>[Python Clean Code] Chapter1. 코드 포매팅과 도구 | Chirpy</title><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="icon" href="/assets/img/favicons/favicon.ico" type="image/x-icon"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon.png"><link rel="apple-touch-icon" href="/assets/img/favicons/apple-icon-precomposed.png"><link rel="apple-touch-icon" sizes="57x57" href="/assets/img/favicons/apple-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/assets/img/favicons/apple-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicons/apple-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/assets/img/favicons/apple-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicons/apple-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/assets/img/favicons/apple-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/assets/img/favicons/apple-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/assets/img/favicons/apple-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-icon-180x180.png"><link rel="icon" type="image/png" sizes="192x192" href="/assets/img/favicons/android-icon-192x192.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/assets/img/favicons/favicon-96x96.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/manifest.json"><meta name='msapplication-config' content='/assets/img/favicons/browserconfig.xml'><meta name="msapplication-TileColor" content="#ffffff"><meta name="msapplication-TileImage" content="/assets/img/favicons/ms-icon-144x144.png"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://fonts.gstatic.com"><link rel="preconnect" href="cdn.jsdelivr.net"><link rel="dns-prefetch" href="cdn.jsdelivr.net"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha256-LA89z+k9fjgMKQ/kq4OO2Mrf8VltYml/VES+Rg0fh20=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css" integrity="sha256-+N4/V/SbAFiW1MPBCXnfnP9QSN3+Keu+NlB+0ev/YKQ=" crossorigin="anonymous"><link rel="preload" href="/assets/css/post.css" as="style"><link rel="stylesheet" href="/assets/css/post.css"><link rel="preload" as="style" href="/assets/css/lib/bootstrap-toc.min.css"><link rel="stylesheet" href="/assets/css/lib/bootstrap-toc.min.css" /> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script> <script defer src="https://cdn.jsdelivr.net/combine/npm/popper.js@1.15.0,npm/bootstrap@4/dist/js/bootstrap.min.js"></script> <script async src="/assets/js/post.min.js"></script><body data-spy="scroll" data-target="#toc"><div id="sidebar" class="d-flex flex-column"><div id="nav-wrapper"><div id="profile-wrapper" class="d-flex flex-column"><div id="avatar" class="d-flex justify-content-center"> <a href="/" alt="avatar"> <img src="/assets/img/sample/avatar.jpg" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="profile-text mt-3"><div class="site-title"> <a href="/">Chirpy</a></div><div class="site-subtitle font-italic">A text-focused Jekyll theme.</div></div></div><ul class="nav flex-column"><li class="nav-item d-flex justify-content-center "> <a href="/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/categories/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/tags/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-tags ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/archives/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item d-flex justify-content-center "> <a href="/tabs/about/" class="nav-link d-flex justify-content-center align-items-center w-100"> <i class="fa-fw fas fa-info ml-xl-3 mr-xl-3 unloaded"></i> <span>ABOUT</span> </a></ul></div><div class="sidebar-bottom d-flex flex-wrap justify-content-around mt-4"> <span id="mode-toggle-wrapper"> <i class="mode-toggle fas fa-adjust"></i> <script type="text/javascript"> class ModeToggle { static get MODE_KEY() { return "mode"; } static get DARK_MODE() { return "dark"; } static get LIGHT_MODE() { return "light"; } constructor() { if (this.hasMode) { if (this.isDarkMode) { if (!this.isSysDarkPrefer) { this.setDark(); } } else { if (this.isSysDarkPrefer) { this.setLight(); } } } var self = this; /* always follow the system prefers */ this.sysDarkPrefers.addListener(function() { if (self.hasMode) { if (self.isDarkMode) { if (!self.isSysDarkPrefer) { self.setDark(); } } else { if (self.isSysDarkPrefer) { self.setLight(); } } self.clearMode(); } self.updateMermaid(); }); } /* constructor() */ setDark() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.DARK_MODE); } setLight() { $('html').attr(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); sessionStorage.setItem(ModeToggle.MODE_KEY, ModeToggle.LIGHT_MODE); } clearMode() { $('html').removeAttr(ModeToggle.MODE_KEY); sessionStorage.removeItem(ModeToggle.MODE_KEY); } get sysDarkPrefers() { return window.matchMedia("(prefers-color-scheme: dark)"); } get isSysDarkPrefer() { return this.sysDarkPrefers.matches; } get isDarkMode() { return this.mode == ModeToggle.DARK_MODE; } get isLightMode() { return this.mode == ModeToggle.LIGHT_MODE; } get hasMode() { return this.mode != null; } get mode() { return sessionStorage.getItem(ModeToggle.MODE_KEY); } /* get the current mode on screen */ get modeStatus() { if (this.isDarkMode || (!this.hasMode && this.isSysDarkPrefer) ) { return ModeToggle.DARK_MODE; } else { return ModeToggle.LIGHT_MODE; } } updateMermaid() { if (typeof mermaid !== "undefined") { let expectedTheme = (this.modeStatus === ModeToggle.DARK_MODE? "dark" : "default"); let config = { theme: expectedTheme }; /* re-render the SVG › <https://github.com/mermaid-js/mermaid/issues/311#issuecomment-332557344> */ $(".mermaid").each(function() { let svgCode = $(this).prev().children().html(); $(this).removeAttr("data-processed"); $(this).html(svgCode); }); mermaid.initialize(config); mermaid.init(undefined, ".mermaid"); } } flipMode() { if (this.hasMode) { if (this.isSysDarkPrefer) { if (this.isLightMode) { this.clearMode(); } else { this.setLight(); } } else { if (this.isDarkMode) { this.clearMode(); } else { this.setDark(); } } } else { if (this.isSysDarkPrefer) { this.setLight(); } else { this.setDark(); } } this.updateMermaid(); } /* flipMode() */ } /* ModeToggle */ let toggle = new ModeToggle(); $(".mode-toggle").click(function() { toggle.flipMode(); }); </script> </span> <span class="icon-border"></span> <a href="https://github.com/github_username" aria-label="github" target="_blank" rel="noopener"> <i class="fab fa-github-alt"></i> </a> <a href="https://twitter.com/twitter_username" aria-label="twitter" target="_blank" rel="noopener"> <i class="fab fa-twitter"></i> </a> <a href=" javascript:location.href = 'mailto:' + ['example','doamin.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a></div></div><div id="topbar-wrapper" class="row justify-content-center topbar-down"><div id="topbar" class="col-11 d-flex h-100 align-items-center justify-content-between"> <span id="breadcrumb"> <span> <a href="/"> Posts </a> </span> <span>[Python Clean Code] Chapter1. 코드 포매팅과 도구</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" placeholder="Search..."> <i class="fa fa-times-circle fa-fw" id="search-cleaner"></i> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper"><div id="main"><div class="row"><div id="post-wrapper" class="col-12 col-lg-11 col-xl-8"><div class="post pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><h1 data-toc-skip>[Python Clean Code] Chapter1. 코드 포매팅과 도구</h1><div class="post-meta text-muted d-flex flex-column"><div> Posted <span class="timeago " data-toggle="tooltip" data-placement="bottom" title="Fri, May 1, 2020, 9:38 AM +0800" > May 1 <i class="unloaded">2020-05-01T09:38:00+08:00</i> </span> by <span class="author"> your_full_name </span></div></div><div class="post-content"><blockquote><p>Python Clean Code 책 내용 정리 노트 입니다.</p></blockquote><h1 id="chapter1-코드-포매팅과-도구">Chapter1 코드 포매팅과 도구</h1><h2 id="클린-코드의-의미">클린 코드의 의미</h2><hr /><p>프로그래밍 언어는 생각을 컴퓨터에게 전달하는 것이 아니라 다른 개발자에게 전달하는 것이다.<br /> 그러므로 다른 사람이 코드를 읽고 쉽게 유지보수 할 수 있어야 한다.</p><h2 id="클린-코드의-중요성">클린 코드의 중요성</h2><hr /><p>민첩한 개발 및 지속적인 배포 가능하다.<br /> 만약 코드가 클린하지 않다면 매번 리팩토링을 해야 하고, 기술 부채를 해결하기 위해 멈춰야 한다.<br /> 코드를 지금 변경하는 것 보다 미래에 변경하는 것이 어렵기 때문에 부채라는 단어를 사용한다.</p><h3 id="클린-코드에서-코드-포매팅의-역할">클린 코드에서 코드 포매팅의 역할</h3><p>클린 코드는 단지 PEP-8에 따라 포매팅하고 검사 도구 등을 사용하는 것이 아닌 그 이상을 말한다.<br /> 클린 코드는 품질 좋은 소프트웨어를 개발하고, 견고하고 유지보수가 쉬운 시스템을 만들고, 기술 부채를 회피하는 것을 말한다.</p><h3 id="프로젝트-코딩-스타일-가이드-준수">프로젝트 코딩 스타일 가이드 준수</h3><p>좋은 코드 레이아웃의 가장 중요한 특징은 일관성이다. 코드가 일관되게 구조화되어 있으면 가독성이 높아지고, 오류가 발생하여도 쉽게 파악할 수 있다.<br /> PEP-8은 파이썬의 많은 특수성을 고려했기 때문에, PEP-8을 확장해서 사용하는 것이 좋다.</p><p>PEP-8의 특징</p><ul><li>검색 효율성 : 특정 문자열을 찾는 기능<ul><li>parameter에 값을 할당하는 곳<ul><li>location=current_location</ul><li>location 변수에 값을 할당하는 곳<ul><li>current_location = get_location()</ul></ul><li>일관성<ul><li>여러 사람이 같은 레이아웃, 문서화, 네이밍 룰 등을 지키면 새로운 사람도 쉽게 적응할 수 있다.</ul><li>코드 품질<ul><li>코드를 쉽게 읽을 수 있고, 버그를 쉽게 찾을 수 있다.</ul></ul><h2 id="docstring과-어노테이션">Docstring과 어노테이션</h2><hr /><p>훌륭한 코드는 문서화 또한 잘 되어 있다.<br /> 문서화하는 것은 주석을 추가하는 것과는 다르다. 주석은 가급적 피하고, 문서화를 통해 데이터 타입과 예제를 제공할 수 있어야 한다.<br /> 파이썬은 동적으로 타입을 결정하기 때문에, 어노테이션을 통해 정보를 명시해야 다른 개발자가 쉽게 이해할 수 있다.<br /> 또한 어노테이션을 사용하면 Mypy같은 도구를 사용해 자동화된 검증을 할 수 있다.</p><h3 id="docstring">Docstring</h3><p>Docstring은 코드에 포함된 문서(Document)이다. 이유가 아닌 설명이며 주석(Comment)와는 다르다.<br /> 주석을 다는 것은 나쁜 습관이다.<br /> 첫째, 주석은 코드로 아이디어를 제대로 표현하지 못했음을 나타낸다.<br /> 둘째, 주석은 오해의 소지가 있다. 최악의 경우는 주석과 코드가 다를 때 이다.<br /> 외부 라이브러리에 오류가 있는 경우는 주석이 허용된다. Docstring은 주석이 아니라 특정 컴포넌트(모듈, 클래스, 메소드)에 대한 문서화이다.<br /> Docstring을 작성하는 것이 좋은 이유는 파이썬이 동적 타이핑을 하기 때문에 어떤 타입을 사용하는지 알 수 없기 때문이다.</p><p>Docstring의 예제</p><blockquote><div class="table-wrapper"><table><tbody><tr><td>update(…)<tr><td>D.update(E, **F) -&gt; None. Update D from dict/iterable E and F.<tr><td>If E has a .keys() method, does: for k in E: D[k] = E[k]<tr><td>If E lacks .keys() method, does: for (k, v) in E: D[k] = v<tr><td>In either case, this is followed by: for k in F: D[k] = F[k]</table></div></blockquote><p>dict.update는 2가지로 사용할 수 있다.</p><ol><li>key() 메소드를 가진 파라미터 전달<div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="n">d</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">d</span><span class="p">.</span><span class="n">update</span><span class="p">({</span><span class="mi">1</span><span class="p">:</span><span class="s">"one"</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s">"two"</span><span class="p">})</span>
</pre></table></code></div></div><li>키와 쌍을 가진 이터러블 전달<div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">d</span><span class="p">.</span><span class="n">update</span><span class="p">([(</span><span class="mi">3</span><span class="p">,</span> <span class="s">"three"</span><span class="p">),</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="s">"four"</span><span class="p">)])</span>
</pre></table></code></div></div></ol><p>이러한 정보를 통해 메소드가 어떻게 동작하는지 알 수 있다.<br /> 객체에 docstring이 정의되어 있으면 <strong>doc</strong> 속성을 통해 접근이 가능하다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">my_function</span><span class="p">():</span>
    <span class="s">"""임의의 계산 수행"""</span>
</pre></table></code></div></div><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>my_function.__doc__
&gt; 임의의 계산 수행
</pre></table></code></div></div><p>Sphinx를 실행하면 프로젝트 문서화를 위한 기본 골격을 만들어준다.</p><p>docstring의 단점은 지속적으로 수작업을 해야하며, 코드가 변경되면 업데이트를 해야된다는 것이다.</p><h3 id="어노테이션">어노테이션</h3><p>PEP-3107에서 어노테이션을 소개하고 있다. 어노테이션은 함수 인자로 어떤 값이 와야 하는지 알려주는 방법이다.<br /> <a href="https://www.python.org/dev/peps/pep-3107/" target="_blank">https://www.python.org/dev/peps/pep-3107/</a></p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="nb">long</span><span class="p">):</span>
        <span class="bp">self</span><span class="p">.</span><span class="n">lat</span> <span class="o">=</span> <span class="n">lat</span>
        <span class="bp">self</span><span class="p">.</span><span class="nb">long</span> <span class="o">=</span> <span class="nb">long</span>

    <span class="k">def</span> <span class="nf">locate</span><span class="p">(</span><span class="n">latitude</span><span class="p">:</span><span class="nb">float</span><span class="p">,</span> <span class="n">longitude</span><span class="p">:</span><span class="nb">float</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Point</span><span class="p">:</span>
</pre></table></code></div></div><p>latitude와 longitute에 float를 지정함으로써 타입을 예상할 수 있고, 리턴 값도 Point instance라는 것을 알 수 있다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre><td class="rouge-code"><pre><span class="k">class</span> <span class="nc">Point</span><span class="p">:</span>
    <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span>
    <span class="nb">long</span><span class="p">:</span> <span class="nb">float</span>
</pre></table></code></div></div><p>메소드의 파라미터, 리턴 뿐만 아니라 변수에 직접 타입을 지정할 수 있다.(PEP-526)<br /> 어노테이션은 타입, 리턴 뿐만 아니라 다양하게 사용할 수 있다.<br /> 어노테이션을 사용하면 <strong>annotations</strong> 속성이 생기고, 아래와 같이 출력된다.</p><div class="language-plaintext highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre><td class="rouge-code"><pre>location.__annotations__
{'latitude':float, 'longitude':float, 'return':__main__.Point}
</pre></table></code></div></div><p>PEP-484를 적용하면 어노테이션을 통해 코드를 확인할 수 있다.<br /> 타입 힌팅(Mypy 등)을 사용하면 올바른 타입이 사용되었는지 자동으로 체크할 수 있다. <a href="https://www.python.org/dev/peps/pep-0484/" target="_blank">https://www.python.org/dev/peps/pep-0484/</a></p><h3 id="어노테이션은-docstring을-대체하는-것일까">어노테이션은 docstring을 대체하는 것일까?</h3><p>docstring을 간편하게 어노테이션으로 표현을 할 수 있지만 대체할 수 있는 것은 아니다.</p><p>다음과 같은 예제가 있다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">data_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">'status'</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nb">ValueError</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">"data"</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s">"payload"</span><span class="p">]}</span>
</pre></table></code></div></div><p>파라미터와 리턴 타입을 알 수 있지만 메소드의 상세내용은 알 수가 없다. docstring을 아래와 같이 추가해 보자.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">data_from_response</span><span class="p">(</span><span class="n">response</span><span class="p">:</span> <span class="nb">dict</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">:</span>
    <span class="s">"""response에 문제가 없다면 response의 payload를 반환
    - response dict의 예제::
    {
        "status": 200, # &lt;int&gt;
        "timestamp": "...", # 현재 시간의 ISO 포맷 문자열
        "payload": "..." # 반환하려는 사전 데이터
    }
    
    - 반환 사전 값의 예제::
    {"data": {...}}

    - 발생 가능한 예외:
    - HTTP status가 200이 아닌 경우 ValueError 발생
    """</span>

    <span class="k">if</span> <span class="n">response</span><span class="p">[</span><span class="s">'status'</span><span class="p">]</span> <span class="o">!=</span> <span class="mi">200</span><span class="p">:</span>
        <span class="k">raise</span> <span class="nb">ValueError</span>
    <span class="k">return</span> <span class="p">{</span><span class="s">"data"</span><span class="p">:</span> <span class="n">response</span><span class="p">[</span><span class="s">"payload"</span><span class="p">]}</span>

</pre></table></code></div></div><h3 id="기본-품질-향상을-위한-도구-설정">기본 품질 향상을 위한 도구 설정</h3><p>모든 검사는 자동화되어야 하고, 빌드의 한 부분이 되어야 한다. 검사에 실패하면 빌드도 실패하도록 설정 해야 한다.</p><h4 id="mypy를-사용한-타입-힌팅">Mypy를 사용한 타입 힌팅</h4><p>mypy(<a href="http://mypy-lang.org/" target="_blank">http://mypy-lang.org/</a>)는 정적 타입 검사 도구이다. 모든 파일의 타입 불일치를 검사할 수 있다.</p><p>설치</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pip <span class="nb">install </span>mypy 
</pre></table></code></div></div><p>실행</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>mypy <span class="o">{</span>파일명<span class="o">}</span>
</pre></table></code></div></div><p>제외</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre><span class="n">type_to_ignore</span> <span class="o">=</span> <span class="s">"something"</span> <span class="c1"># type: ignore
</span></pre></table></code></div></div><h4 id="pylint를-사용한-코드-검사">Pylint를 사용한 코드 검사</h4><p>Pylint(<a href="http://mypy-lang.org/">http://www.pylint.org/</a>는 PEP-8을 준수했는지 체크하는 도구이다.<br /> .pylintrc 파일을 통해 설정 값을 바꿀 수 있다.</p><p>설치</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pip <span class="nb">install </span>pylint 
</pre></table></code></div></div><p>실행</p><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>pylint
</pre></table></code></div></div><h4 id="자동-검사-설정">자동 검사 설정</h4><p>makefile을 통해 검사 도구를 자동화할 수 있다.</p><div class="language-cmake highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre><td class="rouge-code"><pre>typehint:
mypy src/ tests/

test:
pytest tests/

lint:
pylint src/ tests/

checklist: lint typehint test

.PHONY: typehint test lint checklist
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre><td class="rouge-code"><pre>make checklist
</pre></table></code></div></div><p>위 makefile은 아래의 순서로 동작한다.</p><ol><li>코딩 가이드라인 검사(ex, PEP-8)<li>올바른 타입을 사용했는지 검사<li>최종적으로 테스트 실행</ol><p>빌드 중 검사하는 것 외에 컨벤션이나 코드 구조화를 자동화할 수도 있다. Black(<a href="https://github.com/psf/black" target="_blank">https://github.com/psf/black</a>)을 사용하면 자동으로 코드를 포매팅한다. 아래 코드는 PEP-8에 의하면 올바은 코드이지만 Black의 컨벤션을 따르지 않았다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="s">"""
    &gt;&gt;&gt; my_function('black')
    'received_Black'
    """</span>
    <span class="k">return</span> <span class="s">'received {0}'</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">title</span><span class="p">())</span>
</pre></table></code></div></div><p>Black을 적용하면 아래와 같이 따옴표가 쌍따옴표로 바뀐 것을 확인할 수 있다.</p><div class="language-python highlighter-rouge"><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
</pre><td class="rouge-code"><pre><span class="k">def</span> <span class="nf">my_function</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="s">"""
    &gt;&gt;&gt; my_function('black')
    'received_Black'
    """</span>
    <span class="k">return</span> <span class="s">"received {0}"</span><span class="p">.</span><span class="nb">format</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="n">title</span><span class="p">())</span>
</pre></table></code></div></div></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='/categories/python/'>Python</a>, <a href='/categories/python-clean-code/'>Python Clean Code</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="/tags/python/" class="post-tag no-text-decoration" >python</a> <a href="/tags/python-clean-code/" class="post-tag no-text-decoration" >python clean code</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/">CC BY 4.0</a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=[Python Clean Code] Chapter1. 코드 포매팅과 도구 - Chirpy&url=http://localhost:4000/posts/Clean-Code-In-Python-chapter1/" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=[Python Clean Code] Chapter1. 코드 포매팅과 도구 - Chirpy&u=http://localhost:4000/posts/Clean-Code-In-Python-chapter1/" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://telegram.me/share?text=[Python Clean Code] Chapter1. 코드 포매팅과 도구 - Chirpy&url=http://localhost:4000/posts/Clean-Code-In-Python-chapter1/" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i class="fa-fw fas fa-link small" onclick="copyLink()" data-toggle="tooltip" data-placement="top" title="Copy link"></i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted topbar-down"><div class="access"><div id="access-lastmod" class="post"> <span>Recent Update</span><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/ch2_patterns_for_cleaner_python/">[Python Tricks]chapter2. Patterns for Cleaner Python</a><li><a href="/posts/leetcode-739/">[LeetCode]739. Daily Temperatures</a><li><a href="/posts/customize-the-favicon/">Customize the Favicon</a><li><a href="/posts/getting-started/">Getting Started</a><li><a href="/posts/write-a-new-post/">Writing a New Post</a></ul></div><div id="access-tags"> <span>Trending Tags</span><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/tensorflow-in-practice/">Tensorflow in Practice</a> <a class="post-tag" href="/tags/docstring/">docstring</a> <a class="post-tag" href="/tags/python-clean-code/">python clean code</a> <a class="post-tag" href="/tags/python-tricks/">Python Tricks</a> <a class="post-tag" href="/tags/3sum/">3sum</a> <a class="post-tag" href="/tags/context-manager/">context manager</a> <a class="post-tag" href="/tags/convention/">convention</a></div></div></div><div id="toc-wrapper" class="pl-0 pr-4 mb-5"> <span class="pl-3 pt-2 mb-2">Contents</span><nav id="toc" data-toggle="toc"></nav></div></div></div><div class="row"><div class="col-12 col-lg-11 col-xl-8"><div id="post-extend-wrapper" class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-md-4 pr-md-4"><div id="related-posts" class="mt-5 mb-2 mb-sm-4"><h3 class="pt-2 mt-1 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/Clean-Code-In-Python-chapter2/"><div class="card-body"> <span class="timeago small" > May 1 <i class="unloaded">2020-05-01T09:38:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Python Clean Code] Chapter2. 파이썬스러운(pythonic) 코드</h3><div class="text-muted small"><p> Python Clean Code 책 내용 정리 노트 입니다. Chapter2 파이썬스러운(pythonic) 코드 파이썬스러운(pythonic) 관용구(idiom)를 사용했을때의 장점 더 좋은 성능을 낸다. 코드가 작고 이해하기 쉽다. 동일한 패턴과 구조에 익숙해지면 실수가 줄고, 본질적인것에 집중할 수 있다. 인덱스와 슬라이스...</p></div></div></a></div><div class="card"> <a href="/posts/coding_convention/"><div class="card-body"> <span class="timeago small" > May 10 <i class="unloaded">2020-05-10T13:11:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Python]coding convention 및 tool</h3><div class="text-muted small"><p> Coding Convention이란? coding convention은 code를 작성하는 구체적인 가이드라인이다. 협업을 위해서는 읽기 쉽고 일관적인 코드를 작성하는 것이 중요하다. 하지만 매우 많은 기준을 모두 지키면서 code를 작성하는 것이 매우 힘들다. 자동화 툴을 적용해보자 pylint pylint는 PEP-8을 준...</p></div></div></a></div><div class="card"> <a href="/posts/context_manager/"><div class="card-body"> <span class="timeago small" > May 15 <i class="unloaded">2020-05-15T13:11:00+08:00</i> </span><h3 class="pt-0 mt-1 mb-3" data-toc-skip>[Python]context manager(with statement)</h3><div class="text-muted small"><p> #</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="/posts/TensorFlow-in-Practice-Second-Week1/" class="btn btn-outline-primary"><p>Tensorflow in Practice 두번째 강의 Week1</p></a> <a href="/posts/Clean-Code-In-Python-chapter2/" class="btn btn-outline-primary"><p>[Python Clean Code] Chapter2. 파이썬스러운(pythonic) 코드</p></a></div></div></div></div><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script> <script type="text/javascript"> const imgs = document.querySelectorAll('#post-wrapper img'); const observer = lozad(imgs); observer.observe(); </script><footer class="d-flex w-100 justify-content-center"><div class="d-flex justify-content-between align-items-center"><div class="footer-left"><p class="mb-0"> © 2020 <a href="https://twitter.com/username">your_full_name</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0"> Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy/" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></footer></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-xl-11 post-content"><div id="search-hints"><h4 class="text-muted mb-4">Trending Tags</h4><a class="post-tag" href="/tags/python/">python</a> <a class="post-tag" href="/tags/algorithm/">algorithm</a> <a class="post-tag" href="/tags/leetcode/">leetcode</a> <a class="post-tag" href="/tags/tensorflow-in-practice/">Tensorflow in Practice</a> <a class="post-tag" href="/tags/docstring/">docstring</a> <a class="post-tag" href="/tags/python-clean-code/">python clean code</a> <a class="post-tag" href="/tags/python-tricks/">Python Tricks</a> <a class="post-tag" href="/tags/3sum/">3sum</a> <a class="post-tag" href="/tags/context-manager/">context manager</a> <a class="post-tag" href="/tags/convention/">convention</a></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a> <script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.7.3/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="http://localhost:4000{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"><div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>{categories}</div><div><i class="fa fa-tag fa-fw"></i>{tags}</div></div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No result founds.</p>' }); </script>
